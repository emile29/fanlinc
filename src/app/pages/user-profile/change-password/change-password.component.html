<div class="change-password-container">
  <div class="paper card1">
    <div class="card-header">
      <h2>Change Password</h2>
    </div>

    <div class="card-body">
      <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()" class="change-password-form">

        <!-- Current Password -->
        <div class="form-group">
          <label for="currentPassword">Current Password *</label>
          <input
            type="password"
            id="currentPassword"
            formControlName="currentPassword"
            class="form-control"
            [class.is-invalid]="changePasswordForm.get('currentPassword')?.invalid && changePasswordForm.get('currentPassword')?.touched"
            placeholder="Enter your current password">
          <div class="invalid-feedback" *ngIf="changePasswordForm.get('currentPassword')?.invalid && changePasswordForm.get('currentPassword')?.touched">
            Current password is required.
          </div>
        </div>

        <!-- New Password -->
        <div class="form-group">
          <label for="newPassword">New Password *</label>
          <input
            type="password"
            id="newPassword"
            formControlName="newPassword"
            class="form-control"
            [class.is-invalid]="changePasswordForm.get('newPassword')?.invalid && changePasswordForm.get('newPassword')?.touched"
            placeholder="Enter your new password">
          <div class="invalid-feedback" *ngIf="changePasswordForm.get('newPassword')?.invalid && changePasswordForm.get('newPassword')?.touched">
            <div *ngIf="changePasswordForm.get('newPassword')?.errors?.['required']">New password is required.</div>
            <div *ngIf="changePasswordForm.get('newPassword')?.errors?.['minlength']">Password must be at least 6 characters long.</div>
          </div>
        </div>

        <!-- Confirm Password -->
        <div class="form-group">
          <label for="confirmPassword">Confirm New Password *</label>
          <input
            type="password"
            id="confirmPassword"
            formControlName="confirmPassword"
            class="form-control"
            [class.is-invalid]="changePasswordForm.get('confirmPassword')?.invalid && changePasswordForm.get('confirmPassword')?.touched"
            placeholder="Confirm your new password">
          <div class="invalid-feedback" *ngIf="changePasswordForm.get('confirmPassword')?.invalid && changePasswordForm.get('confirmPassword')?.touched">
            <div *ngIf="changePasswordForm.get('confirmPassword')?.errors?.['required']">Please confirm your new password.</div>
            <div *ngIf="changePasswordForm.get('confirmPassword')?.errors?.['passwordMismatch']">Passwords do not match.</div>
          </div>
        </div>

        <!-- Error Message -->
        <div class="alert alert-danger" *ngIf="errorMessage">
          {{ errorMessage }}
        </div>

        <!-- Success Message -->
        <div class="alert alert-success" *ngIf="successMessage">
          {{ successMessage }}
        </div>

        <!-- Action Buttons -->
        <div class="form-actions">
          <button
            type="submit"
            class="btn"
            [disabled]="changePasswordForm.invalid || isLoading">
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
            {{ isLoading ? 'Changing...' : 'Change Password' }}
          </button>

          <button
            type="button"
            class="btn ms-2"
            (click)="onCancel()"
            [disabled]="isLoading">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
